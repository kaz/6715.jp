<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XKSQ648BQ2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-XKSQ648BQ2')</script><meta charSet="utf-8"/><meta name="format-detection" content="telephone=no"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="author" content="sekai"/><meta name="generator" content="https://github.com/kaz/nextjs-blog-scaffold"/><meta property="og:url" content="https://6715.jp/posts/5/"/><meta property="og:site_name" content="6715.jp"/><link rel="icon" href="https://res.cloudinary.com/narusejun/image/twitter_name/h_128/sekai67.jpg"/><link rel="canonical" href="https://6715.jp/posts/5/"/><title>メルセンヌ・ツイスタをわかった気になる | 6715.jp</title><meta name="description" content="メルセンヌ・ツイスタについて。 メルセンヌ・ツイスタ(MT)は擬似乱数列を作るアルゴリズムの一つで、 他の手法と比べると欠点が少なくて高品質な擬似乱数列を高速に作れるんだって。スゴイ！ プログラムを…"/><meta name="twitter:card" content="summary"/><meta property="og:title" content="メルセンヌ・ツイスタをわかった気になる | 6715.jp"/><meta property="og:type" content="article"/><meta property="og:image" content="https://res.cloudinary.com/narusejun/image/twitter_name/h_128/sekai67.jpg"/><meta property="og:description" content="メルセンヌ・ツイスタについて。 メルセンヌ・ツイスタ(MT)は擬似乱数列を作るアルゴリズムの一つで、 他の手法と比べると欠点が少なくて高品質な擬似乱数列を高速に作れるんだって。スゴイ！ プログラムを…"/><meta property="article:published_time" content="2016-06-26T00:00:00.000Z"/><meta property="article:author" content="sekai"/><meta property="article:tag" content="メルセンヌ・ツイスタ"/><meta property="article:tag" content="乱数"/><meta name="next-head-count" content="20"/><link rel="preload" href="/_next/static/css/61bb26da18d2752efee9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/61bb26da18d2752efee9.css" data-n-g=""/><link rel="preload" href="/_next/static/css/ad30b8ddc18c06e71d13.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ad30b8ddc18c06e71d13.css" data-n-p=""/><noscript data-n-css=""></noscript></head><body><div id="__next"><header class="Header_header__1mCED"><h1><a href="/">6715.jp</a></h1></header><main class="posts_post__IJEgW"><section class="posts_meta__26MyQ"><small>2016-06-26</small><h1>メルセンヌ・ツイスタをわかった気になる</h1><div><div><img src="https://res.cloudinary.com/narusejun/image/twitter_name/h_128/sekai67.jpg" alt="sekai"/><a href="#profile">sekai</a></div><div><svg aria-hidden="true" role="img" class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z"></path></svg><a href="/tags/%E3%83%A1%E3%83%AB%E3%82%BB%E3%83%B3%E3%83%8C%E3%83%BB%E3%83%84%E3%82%A4%E3%82%B9%E3%82%BF/">メルセンヌ・ツイスタ</a><a href="/tags/%E4%B9%B1%E6%95%B0/">乱数</a></div></div></section><div class="SocialShare_social__3xEln"><a rel="noopener noreferrer" target="_blank" href="https://social-plugins.line.me/lineit/share?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="LINE" style="background-color:#00C300"><svg viewBox="0 0 24 24"><path fill="white" d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="http://twitter.com/share?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F&amp;text=%E3%83%A1%E3%83%AB%E3%82%BB%E3%83%B3%E3%83%8C%E3%83%BB%E3%83%84%E3%82%A4%E3%82%B9%E3%82%BF%E3%82%92%E3%82%8F%E3%81%8B%E3%81%A3%E3%81%9F%E6%B0%97%E3%81%AB%E3%81%AA%E3%82%8B%20%7C%206715.jp"><span title="Twitter" style="background-color:#1DA1F2"><svg viewBox="0 0 24 24"><path fill="white" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="Facebook" style="background-color:#1877F2"><svg viewBox="0 0 24 24"><path fill="white" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="http://b.hatena.ne.jp/add?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="Hatena Bookmark" style="background-color:#00A4DE"><svg viewBox="0 0 24 24"><path fill="white" d="M20.47 0C22.42 0 24 1.58 24 3.53v16.94c0 1.95-1.58 3.53-3.53 3.53H3.53C1.58 24 0 22.42 0 20.47V3.53C0 1.58 1.58 0 3.53 0h16.94zm-3.705 14.47c-.78 0-1.41.63-1.41 1.41s.63 1.414 1.41 1.414 1.41-.645 1.41-1.425-.63-1.41-1.41-1.41zM8.61 17.247c1.2 0 2.056-.042 2.58-.12.526-.084.976-.222 1.32-.412.45-.232.78-.564 1.02-.99s.36-.915.36-1.48c0-.78-.21-1.403-.63-1.87-.42-.48-.99-.734-1.74-.794.66-.18 1.156-.45 1.456-.81.315-.344.465-.824.465-1.424 0-.48-.103-.885-.3-1.26-.21-.36-.493-.645-.883-.87-.345-.195-.735-.315-1.215-.405-.464-.074-1.29-.12-2.474-.12H5.654v10.486H8.61zm.736-4.185c.705 0 1.185.088 1.44.262.27.18.39.495.39.93 0 .405-.135.69-.42.855-.27.18-.765.254-1.44.254H8.31v-2.297h1.05zm8.656.706v-7.06h-2.46v7.06H18zM8.925 9.08c.71 0 1.185.08 1.432.24.245.16.367.435.367.83 0 .38-.13.646-.39.804-.265.154-.747.232-1.452.232h-.57V9.08h.615z"></path></svg></span></a></div><article class="posts_content__YuXhG"><p>メルセンヌ・ツイスタについて。<p>メルセンヌ・ツイスタ(MT)は擬似乱数列を作るアルゴリズムの一つで、 他の手法と比べると欠点が少なくて高品質な擬似乱数列を高速に作れるんだって。スゴイ！ プログラムをかじった人なら、多分聞いたことがあるんじゃないかと思います。<p>日本初のアルゴリズムだし、日本語文献あるかな？って思ったんですけど、良い物が見つからなかった（かなしい）ので、 元の<a href=http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/ARTICLES/mt.pdf rel="noopener noreferrer"target=_blank>論文</a>を読みながらRubyでMTを実装して理解を深めたいと思います。<p>なんか強いアルゴリズムだ！って聞くとめっちゃ複雑なんじゃないかって思いがちですけど、MTはとっても<span style=font-size:1.5em><strong>†単純†</strong></span>です。<h1>MTの定義</h1><p><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi></mrow><annotation encoding=application/x-tex>w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>ビットの整数からなる乱数列を生成する場合を考えます。 この時、整数を各ビットで分けて<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi></mrow><annotation encoding=application/x-tex>w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>次元行ベクトルとして考えることとします。<p>すると、MTによって生成される乱数列は以下の線形漸化式によって表されます。<div class="math math-display"><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML display=block><semantics><mtable columnalign=center columnspacing=1em rowspacing=0.15999999999999992em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><msub><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mi>n</mi></mrow></msub><mtext> </mtext><mo>=</mo><mtext> </mtext><msub><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mi>m</mi></mrow></msub><mo>⊕</mo><mo stretchy=false>(</mo><msubsup><mi mathvariant=bold>x</mi><mi>k</mi><mi>u</mi></msubsup><mtext> </mtext><mi mathvariant=normal>∣</mi><mtext> </mtext><msubsup><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mi>l</mi></msubsup><mo stretchy=false>)</mo><mi>A</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mo stretchy=false>(</mo><mi>k</mi><mo>=</mo><mn>0</mn><mo separator=true>,</mo><mn>1</mn><mo separator=true>,</mo><mo>⋯</mo><mtext> </mtext><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=application/x-tex>\begin{array}{c} \mathbf{x}_{k+n} \, = \, \mathbf{x}_{k+m} \oplus ( \mathbf{x}^u_k \: | \: \mathbf{x}^l_{k+1} ) A \\ (k = 0,1, \cdots) \end{array}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:2.4091080000000007em;vertical-align:-.9545540000000006em></span><span class=mord><span class=mtable><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.4545540000000001em><span style=top:-3.605446em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3361079999999999em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight mathnormal">n</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3361079999999999em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight mathnormal">m</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.664392em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal">u</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.2831079999999999em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord>∣</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.849108em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.01968em>l</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.34143899999999994em><span></span></span></span></span></span></span><span class=mclose>)</span><span class="mord mathnormal">A</span></span></span><span style=top:-2.405445999999999em><span class=pstrut style=height:3em></span><span class=mord><span class=mopen>(</span><span class="mord mathnormal"style=margin-right:.03148em>k</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>0</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord>1</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=minner>⋯</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mclose>)</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.9545540000000006em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span></span></span></span></span></span></span></div><p>この式に登場する<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>n</mi><mo separator=true>,</mo><mi>m</mi></mrow><annotation encoding=application/x-tex>n,m</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.625em;vertical-align:-.19444em></span><span class="mord mathnormal">n</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal">m</span></span></span></span></span>は定数で、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mn>1</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding=application/x-tex>1 \le m \le n</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.78041em;vertical-align:-.13597em></span><span class=mord>1</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≤</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.7719400000000001em;vertical-align:-.13597em></span><span class="mord mathnormal">m</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≤</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal">n</span></span></span></span></span>を満たします。<p><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mo stretchy=false>(</mo><msubsup><mi mathvariant=bold>x</mi><mi>k</mi><mi>u</mi></msubsup><mtext> </mtext><mi mathvariant=normal>∣</mi><mtext> </mtext><msubsup><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mi>l</mi></msubsup><mo stretchy=false>)</mo></mrow><annotation encoding=application/x-tex>( \mathbf{x}^u_k \: | \: \mathbf{x}^l_{k+1} )</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.190547em;vertical-align:-.34143899999999994em></span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.664392em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal">u</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.2831079999999999em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord>∣</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.849108em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.01968em>l</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.34143899999999994em><span></span></span></span></span></span></span><span class=mclose>)</span></span></span></span></span>は、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi mathvariant=bold>x</mi><mi>k</mi></msub></mrow><annotation encoding=application/x-tex>\mathbf{x}_k</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.59444em;vertical-align:-.15em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.33610799999999996em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span></span>の上位<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi><mo>−</mo><mi>r</mi></mrow><annotation encoding=application/x-tex>w-r</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.66666em;vertical-align:-.08333em></span><span class="mord mathnormal"style=margin-right:.02691em>w</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>−</span><span class=mspace style=margin-right:.2222222222222222em></span></span><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02778em>r</span></span></span></span></span>ビットと<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=application/x-tex>\mathbf{x}_{k+1}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.652771em;vertical-align:-.208331em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.3361079999999999em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span></span></span></span></span>の下位<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>r</mi></mrow><annotation encoding=application/x-tex>r</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02778em>r</span></span></span></span></span>ビットを連結した行ベクトルを表しています。 この<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>r</mi></mrow><annotation encoding=application/x-tex>r</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02778em>r</span></span></span></span></span>も定数で、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mn>0</mn><mo>≤</mo><mi>r</mi><mo>≤</mo><mi>w</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=application/x-tex>0 \le r \le w-1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.78041em;vertical-align:-.13597em></span><span class=mord>0</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≤</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.7719400000000001em;vertical-align:-.13597em></span><span class="mord mathnormal"style=margin-right:.02778em>r</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≤</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:.66666em;vertical-align:-.08333em></span><span class="mord mathnormal"style=margin-right:.02691em>w</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>−</span><span class=mspace style=margin-right:.2222222222222222em></span></span><span class=base><span class=strut style=height:.64444em;vertical-align:0></span><span class=mord>1</span></span></span></span></span>を満たします。<p><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>A</mi></mrow><annotation encoding=application/x-tex>A</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal">A</span></span></span></span></span>は以下のように定義された<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi><mo>×</mo><mi>w</mi></mrow><annotation encoding=application/x-tex>w \times w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.66666em;vertical-align:-.08333em></span><span class="mord mathnormal"style=margin-right:.02691em>w</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>×</span><span class=mspace style=margin-right:.2222222222222222em></span></span><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>正方行列です。<div class="math math-display"><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML display=block><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence=true>(</mo><mtable columnalign="center center center center center"columnspacing=1em rowspacing=0.15999999999999992em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mo lspace=0em rspace=0em>⋱</mo></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><msub><mi>a</mi><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><msub><mi>a</mi><mrow><mi>w</mi><mo>−</mo><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mo lspace=0em rspace=0em>⋯</mo></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mo lspace=0em rspace=0em>⋯</mo></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd></mtr></mtable><mo fence=true>)</mo></mrow></mrow><annotation encoding=application/x-tex>A = \left( \begin{array}{ccccc} 0 &#38 1 &#38 0 &#38 0 &#38 0 \\ 0 &#38 0 &#38 1 &#38 0 &#38 0 \\ 0 &#38 0 &#38 0 &#38 \ddots &#38 0 \\ 0 &#38 0 &#38 0 &#38 0 &#38 1 \\ a_{w-1} &#38 a_{w-2} &#38 \cdots &#38 \cdots &#38 a_0 \end{array} \right)</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal">A</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span></span><span class=base><span class=strut style=height:6.00008em;vertical-align:-2.75004em></span><span class=minner><span class=mopen><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.25004em><span style=top:-1.0499800000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎝</span></span></span><span style=top:-2.1999900000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎜</span></span></span><span style=top:-2.7950000000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎜</span></span></span><span style=top:-3.39001em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎜</span></span></span><span style=top:-3.98502em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎜</span></span></span><span style=top:-4.01002em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎜</span></span></span><span style=top:-5.250039999999999em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎛</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.75004em><span></span></span></span></span></span></span><span class=mord><span class=mtable><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=minner>⋯</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=minner>⋱</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=minner>⋯</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.2500000000000004em><span style=top:-5.410000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-4.21em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-3.01em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>0</span></span></span><span style=top:-1.8099999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord>1</span></span></span><span style=top:-.6099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.7500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span></span></span><span class=mclose><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.25004em><span style=top:-1.0499800000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎠</span></span></span><span style=top:-2.1999900000000006em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎟</span></span></span><span style=top:-2.7950000000000004em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎟</span></span></span><span style=top:-3.39001em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎟</span></span></span><span style=top:-3.98502em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎟</span></span></span><span style=top:-4.01002em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎟</span></span></span><span style=top:-5.250039999999999em><span class=pstrut style=height:3.1550000000000002em></span><span class="delim-size4 delimsizinginner"><span>⎞</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.75004em><span></span></span></span></span></span></span></span></span></span></span></span></div><p>これによって、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi mathvariant=bold>x</mi><mi>A</mi></mrow><annotation encoding=application/x-tex>\mathbf{x} A</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class=mord><span class="mord mathbf">x</span></span><span class="mord mathnormal">A</span></span></span></span></span>を以下のように高速に計算することができます。<div class="math math-display"><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML display=block><semantics><mtable columnalign=center columnspacing=1em rowspacing=0.15999999999999992em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>x</mi><mi>A</mi><mo>=</mo><mrow><mo fence=true>{</mo><mtable columnalign="left left"columnspacing=1em rowspacing=0.3599999999999999em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mo stretchy=false>(</mo><mi mathvariant=bold>x</mi><mo>≫</mo><mn>1</mn><mo stretchy=false>)</mo></mrow></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mo stretchy=false>(</mo><mi mathvariant=bold>x</mi><mo>≫</mo><mn>1</mn><mo stretchy=false>)</mo><mo>⊕</mo><mi mathvariant=bold>a</mi></mrow></mstyle></mtd><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mo stretchy=false>(</mo><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>x</mi><mo>=</mo><mo stretchy=false>(</mo><msub><mi>x</mi><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator=true>,</mo><msub><mi>x</mi><mrow><mi>w</mi><mo>−</mo><mn>2</mn></mrow></msub><mo separator=true>,</mo><mo>⋯</mo><mtext> </mtext><mo separator=true>,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>a</mi><mo>=</mo><mo stretchy=false>(</mo><msub><mi>a</mi><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator=true>,</mo><msub><mi>a</mi><mrow><mi>w</mi><mo>−</mo><mn>2</mn></mrow></msub><mo separator=true>,</mo><mo>⋯</mo><mtext> </mtext><mo separator=true>,</mo><msub><mi>a</mi><mn>0</mn></msub><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=application/x-tex>\begin{array}{c} \mathbf{x} A = \begin{cases} (\mathbf{x} \gg 1) &#38 (x_0 = 0) \\ (\mathbf{x} \gg 1) \oplus \mathbf{a} &#38 (x_0 = 1) \end{cases} \\ \\ \mathbf{x} = (x_{w-1}, x_{w-2}, \cdots, x_0) \\ \mathbf{a} = (a_{w-1}, a_{w-2}, \cdots, a_0) \end{array}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:6.60003em;vertical-align:-3.050015em></span><span class=mord><span class=mtable><span class=arraycolsep style=width:.5em></span><span class=col-align-c><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:3.550015em><span style=top:-5.550015em><span class=pstrut style=height:3.75em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class="mord mathnormal">A</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=minner><span class="mopen delimcenter"style=top:0><span class="delimsizing size4">{</span></span><span class=mord><span class=mtable><span class=col-align-l><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.69em><span style=top:-3.69em><span class=pstrut style=height:3.008em></span><span class=mord><span class=mopen>(</span><span class=mord><span class="mord mathbf">x</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≫</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mclose>)</span></span></span><span style=top:-2.25em><span class=pstrut style=height:3.008em></span><span class=mord><span class=mopen>(</span><span class=mord><span class="mord mathbf">x</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≫</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mclose>)</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class="mord mathbf">a</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.19em><span></span></span></span></span></span><span class=arraycolsep style=width:1em></span><span class=col-align-l><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.69em><span style=top:-3.69em><span class=pstrut style=height:3.008em></span><span class=mord><span class=mopen>(</span><span class=mord><span class="mord mathnormal">x</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>0</span><span class=mclose>)</span></span></span><span style=top:-2.25em><span class=pstrut style=height:3.008em></span><span class=mord><span class=mopen>(</span><span class=mord><span class="mord mathnormal">x</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mclose>)</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.19em><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style=top:-3.459985em><span class=pstrut style=height:3.75em></span><span class=mord></span></span><span style=top:-2.259985em><span class=pstrut style=height:3.75em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mopen>(</span><span class=mord><span class="mord mathnormal">x</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class="mord mathnormal">x</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=minner>⋯</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class="mord mathnormal">x</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mclose>)</span></span></span><span style=top:-1.059985em><span class=pstrut style=height:3.75em></span><span class=mord><span class=mord><span class="mord mathbf">a</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mopen>(</span><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.301108em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.02691em>w</span><span class="mtight mbin">−</span><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.208331em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=minner>⋯</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class="mord mathnormal">a</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:0;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mclose>)</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:3.050015em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span></span></span></span></span></span></span></div><p>こうして、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi></mrow><annotation encoding=application/x-tex>w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>ビットの整数、もとい<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi></mrow><annotation encoding=application/x-tex>w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>次元行ベクトルがたくさんできるわけですが、 これをそのまま乱数として出力するのはなんだかマズいらしくて、 値を程よく分布させるため、出力する行ベクトルに<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>w</mi><mo>×</mo><mi>w</mi></mrow><annotation encoding=application/x-tex>w \times w</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.66666em;vertical-align:-.08333em></span><span class="mord mathnormal"style=margin-right:.02691em>w</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>×</span><span class=mspace style=margin-right:.2222222222222222em></span></span><span class=base><span class=strut style=height:.43056em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.02691em>w</span></span></span></span></span>の適当な<strong>正則行列</strong><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>T</mi></mrow><annotation encoding=application/x-tex>T</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.13889em>T</span></span></span></span></span>を右から掛けます。<p><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>T</mi></mrow><annotation encoding=application/x-tex>T</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.13889em>T</span></span></span></span></span>を右から掛ける事に相当する演算として、実際には以下の様な演算を行います。<div class="math math-display"><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML display=block><semantics><mtable columnalign=left columnspacing=1em rowspacing=0.15999999999999992em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><msub><mi mathvariant=bold>y</mi><mn>1</mn></msub><mo>=</mo><mi mathvariant=bold>x</mi><mo>⊕</mo><mo stretchy=false>(</mo><mi mathvariant=bold>x</mi><mo>≫</mo><mi>u</mi><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><msub><mi mathvariant=bold>y</mi><mn>2</mn></msub><mo>=</mo><msub><mi mathvariant=bold>y</mi><mn>1</mn></msub><mo>⊕</mo><mo stretchy=false>(</mo><mo stretchy=false>(</mo><msub><mi mathvariant=bold>y</mi><mn>1</mn></msub><mo>≪</mo><mi>s</mi><mo stretchy=false>)</mo><mtext> </mtext><mi mathvariant=normal>&amp</mi><mtext> </mtext><mi mathvariant=bold>b</mi><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><msub><mi mathvariant=bold>y</mi><mn>3</mn></msub><mo>=</mo><msub><mi mathvariant=bold>y</mi><mn>2</mn></msub><mo>⊕</mo><mo stretchy=false>(</mo><mo stretchy=false>(</mo><msub><mi mathvariant=bold>y</mi><mn>2</mn></msub><mo>≪</mo><mi>t</mi><mo stretchy=false>)</mo><mtext> </mtext><mi mathvariant=normal>&amp</mi><mtext> </mtext><mi mathvariant=bold>c</mi><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><msub><mi mathvariant=bold>y</mi><mn>4</mn></msub><mo>=</mo><msub><mi mathvariant=bold>y</mi><mn>3</mn></msub><mo>⊕</mo><mo stretchy=false>(</mo><msub><mi mathvariant=bold>y</mi><mn>3</mn></msub><mo>≫</mo><mi>l</mi><mo stretchy=false>)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=application/x-tex>\begin{array}{l} \mathbf{y}_1 = \mathbf{x} \oplus (\mathbf{x} \gg u) \\ \mathbf{y}_2 = \mathbf{y}_1 \oplus ((\mathbf{y}_1 \ll s) \: \&#38 \: \mathbf{b}) \\ \mathbf{y}_3 = \mathbf{y}_2 \oplus ((\mathbf{y}_2 \ll t) \: \&#38 \: \mathbf{c}) \\ \mathbf{y}_4 = \mathbf{y}_3 \oplus (\mathbf{y}_3 \gg l) \end{array}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:4.800000000000001em;vertical-align:-2.1500000000000004em></span><span class=mord><span class=mtable><span class=arraycolsep style=width:.5em></span><span class=col-align-l><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:2.6500000000000004em><span style=top:-4.8100000000000005em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class="mord mathbf">x</span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mopen>(</span><span class=mord><span class="mord mathbf">x</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≫</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mord mathnormal">u</span><span class=mclose>)</span></span></span><span style=top:-3.61em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mopen>(</span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≪</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mord mathnormal">s</span><span class=mclose>)</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord>&amp</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class="mord mathbf">b</span></span><span class=mclose>)</span></span></span><span style=top:-2.4099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">3</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mopen>(</span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≪</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mord mathnormal">t</span><span class=mclose>)</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord>&amp</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class="mord mathbf">c</span></span><span class=mclose>)</span></span></span><span style=top:-1.2099999999999997em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">4</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">3</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>⊕</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight">3</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>≫</span><span class=mspace style=margin-right:.2777777777777778em></span><span class="mord mathnormal"style=margin-right:.01968em>l</span><span class=mclose>)</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:2.1500000000000004em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span></span></span></span></span></span></span></div><p><span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>u</mi><mo separator=true>,</mo><mi>s</mi><mo separator=true>,</mo><mi>t</mi><mo separator=true>,</mo><mi>l</mi></mrow><annotation encoding=application/x-tex>u,s,t,l</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.8888799999999999em;vertical-align:-.19444em></span><span class="mord mathnormal">u</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal">s</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal">t</span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class="mord mathnormal"style=margin-right:.01968em>l</span></span></span></span></span>は定数で、&#38はビットAND演算を表し、<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi mathvariant=bold>b</mi><mo separator=true>,</mo><mi mathvariant=bold>c</mi></mrow><annotation encoding=application/x-tex>\mathbf{b}, \mathbf{c}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.8888799999999999em;vertical-align:-.19444em></span><span class=mord><span class="mord mathbf">b</span></span><span class=mpunct>,</span><span class=mspace style=margin-right:.16666666666666666em></span><span class=mord><span class="mord mathbf">c</span></span></span></span></span></span>は適当な行ベクトルです。<p>こうして得られた<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msub><mi mathvariant=bold>y</mi><mn mathvariant=bold>4</mn></msub></mrow><annotation encoding=application/x-tex>\mathbf{y_4}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.63888em;vertical-align:-.19444em></span><span class=mord><span class=mord><span class="mord mathbf"style=margin-right:.01597em>y</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.30110799999999993em><span style=top:-2.5500000000000003em;margin-left:-.01597em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathbf">4</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.15em><span></span></span></span></span></span></span></span></span></span></span></span>を出力します。 （この操作を <em>Tempering</em> と言うそうです。）<p>で、途中にいろいろ定数やらなんやらが登場したんですが、これらを<div class="math math-display"><span class=katex-display><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML display=block><semantics><mtable columnalign=left columnspacing=1em rowspacing=0.15999999999999992em><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>w</mi><mo>=</mo><mn>32</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>n</mi><mo>=</mo><mn>624</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>m</mi><mo>=</mo><mn>397</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>r</mi><mo>=</mo><mn>31</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>u</mi><mo>=</mo><mn>11</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>s</mi><mo>=</mo><mn>7</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>t</mi><mo>=</mo><mn>15</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi>l</mi><mo>=</mo><mn>18</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>a</mi><mo>=</mo><mrow><mn mathvariant=bold>0</mn><mi mathvariant=bold>x</mi><mn mathvariant=bold>9908</mn><mi mathvariant=bold>B</mi><mn mathvariant=bold>0</mn><mi mathvariant=bold>D</mi><mi mathvariant=bold>F</mi></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>b</mi><mo>=</mo><mrow><mn mathvariant=bold>0</mn><mi mathvariant=bold>x</mi><mn mathvariant=bold>9</mn><mi mathvariant=bold>D</mi><mn mathvariant=bold>2</mn><mi mathvariant=bold>C</mi><mn mathvariant=bold>5680</mn></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle=false scriptlevel=0><mrow><mi mathvariant=bold>c</mi><mo>=</mo><mrow><mn mathvariant=bold>0</mn><mi mathvariant=bold>x</mi><mi mathvariant=bold>E</mi><mi mathvariant=bold>F</mi><mi mathvariant=bold>C</mi><mn mathvariant=bold>60000</mn></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding=application/x-tex>\begin{array}{l} w = 32 \\ n = 624 \\ m = 397 \\ r = 31 \\ u = 11 \\ s = 7 \\ t = 15 \\ l = 18 \\ \mathbf{a} = \mathbf{0x9908B0DF} \\ \mathbf{b} = \mathbf{0x9D2C5680} \\ \mathbf{c} = \mathbf{0xEFC60000} \end{array}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:13.2em;vertical-align:-6.35em></span><span class=mord><span class=mtable><span class=arraycolsep style=width:.5em></span><span class=col-align-l><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:6.849999999999999em><span style=top:-9.009999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal"style=margin-right:.02691em>w</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>3</span><span class=mord>2</span></span></span><span style=top:-7.809999999999999em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">n</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>6</span><span class=mord>2</span><span class=mord>4</span></span></span><span style=top:-6.6099999999999985em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">m</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>3</span><span class=mord>9</span><span class=mord>7</span></span></span><span style=top:-5.409999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal"style=margin-right:.02778em>r</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>3</span><span class=mord>1</span></span></span><span style=top:-4.209999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">u</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mord>1</span></span></span><span style=top:-3.0099999999999976em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">s</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>7</span></span></span><span style=top:-1.8099999999999976em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">t</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mord>5</span></span></span><span style=top:-.6099999999999983em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal"style=margin-right:.01968em>l</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord>1</span><span class=mord>8</span></span></span><span style=top:.590000000000001em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathbf">a</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class="mord mathbf">0</span><span class="mord mathbf">x</span><span class="mord mathbf">9</span><span class="mord mathbf">9</span><span class="mord mathbf">0</span><span class="mord mathbf">8</span><span class="mord mathbf">B</span><span class="mord mathbf">0</span><span class="mord mathbf">D</span><span class="mord mathbf">F</span></span></span></span><span style=top:1.7900000000000003em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathbf">b</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class="mord mathbf">0</span><span class="mord mathbf">x</span><span class="mord mathbf">9</span><span class="mord mathbf">D</span><span class="mord mathbf">2</span><span class="mord mathbf">C</span><span class="mord mathbf">5</span><span class="mord mathbf">6</span><span class="mord mathbf">8</span><span class="mord mathbf">0</span></span></span></span><span style=top:2.9899999999999998em><span class=pstrut style=height:3em></span><span class=mord><span class=mord><span class="mord mathbf">c</span></span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mrel>=</span><span class=mspace style=margin-right:.2777777777777778em></span><span class=mord><span class="mord mathbf">0</span><span class="mord mathbf">x</span><span class="mord mathbf">E</span><span class="mord mathbf">F</span><span class="mord mathbf">C</span><span class="mord mathbf">6</span><span class="mord mathbf">0</span><span class="mord mathbf">0</span><span class="mord mathbf">0</span><span class="mord mathbf">0</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:6.35em><span></span></span></span></span></span><span class=arraycolsep style=width:.5em></span></span></span></span></span></span></span></div><p>とすると、周期が<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><msup><mn>2</mn><mn>19937</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding=application/x-tex>2^{19937}-1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.897438em;vertical-align:-.08333em></span><span class=mord><span class=mord>2</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:.8141079999999999em><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">9</span><span class="mord mtight">9</span><span class="mord mtight">3</span><span class="mord mtight">7</span></span></span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mbin>−</span><span class=mspace style=margin-right:.2222222222222222em></span></span><span class=base><span class=strut style=height:.64444em;vertical-align:0></span><span class=mord>1</span></span></span></span></span>とめちゃくちゃ長い、かの有名なMT19937になります。<h1>MTを実装する</h1><p>なんだか、 <em>は？</em> ってカンジですね！<p>整理すると、<ul><li>長さnの配列を用意して、適当な値で埋める（これがシード値になります）<li>i番目の乱数を得る<ul><li>Step.1 <code>z = x[i] &#38 0b111..1000..0 | x[(i+1)%n] &#38 0b000..0111..1</code> を計算する<li>Step.2 <code>x[i] = x[(i+m)%n] ^ (z >> 1) ^ (z &#38 1 == 0 ? 0 : a)</code> を計算する<li>Step.3 Temperingした値を返す</ul></ul><p>これだけです。シンプルだ！<p>Step.1は<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mo stretchy=false>(</mo><msubsup><mi mathvariant=bold>x</mi><mi>k</mi><mi>u</mi></msubsup><mtext> </mtext><mi mathvariant=normal>∣</mi><mtext> </mtext><msubsup><mi mathvariant=bold>x</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow><mi>l</mi></msubsup><mo stretchy=false>)</mo></mrow><annotation encoding=application/x-tex>( \mathbf{x}^u_k \: | \: \mathbf{x}^l_{k+1} )</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.190547em;vertical-align:-.34143899999999994em></span><span class=mopen>(</span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.664392em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal">u</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.2831079999999999em><span></span></span></span></span></span></span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord>∣</span><span class=mspace style=margin-right:.2222222222222222em></span><span class=mord><span class=mord><span class="mord mathbf">x</span></span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:.849108em><span style=top:-2.4168920000000003em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight"><span class="mord mtight mathnormal"style=margin-right:.03148em>k</span><span class="mtight mbin">+</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.063em;margin-right:.05em><span class=pstrut style=height:2.7em></span><span class="mtight reset-size6 size3 sizing"><span class="mord mtight mathnormal"style=margin-right:.01968em>l</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:.34143899999999994em><span></span></span></span></span></span></span><span class=mclose>)</span></span></span></span></span>を求めることに相当します。 Step.2は 最初の漸化式を適用することに相当し、XORで繋がれた後ろの2項は、行列<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>A</mi></mrow><annotation encoding=application/x-tex>A</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal">A</span></span></span></span></span>を掛けることに相当します。<p>自分みたいなプログラマな人間は、たぶんソースコードを見れば一発で理解できるんじゃないかと思います。 ということで、書いてみたのが以下。<pre><code class="hljs language-ruby"><span class=hljs-comment># MT19937</span>
W = <span class=hljs-number>32</span>
N = <span class=hljs-number>624</span>
M = <span class=hljs-number>397</span>
R = <span class=hljs-number>31</span>
U = <span class=hljs-number>11</span>
S = <span class=hljs-number>7</span>
T = <span class=hljs-number>15</span>
L = <span class=hljs-number>18</span>
A = <span class=hljs-number>0x9908B0DF</span>
B = <span class=hljs-number>0x9D2C5680</span>
C = <span class=hljs-number>0xEFC60000</span>

<span class=hljs-comment># ビットマスク用</span>
WHOLE_MASK = (<span class=hljs-string>"1"</span> * W).to_i(<span class=hljs-number>2</span>)
UPPER_MASK = (<span class=hljs-string>"1"</span> * (W - R) + <span class=hljs-string>"0"</span> * R).to_i(<span class=hljs-number>2</span>)
LOWER_MASK = (<span class=hljs-string>"0"</span> * (W - R) + <span class=hljs-string>"1"</span> * R).to_i(<span class=hljs-number>2</span>)

<span class=hljs-comment># MT乱数列</span>
<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>MT</span></span>
	<span class=hljs-comment># seedを受け取って初期化</span>
	<span class=hljs-function><span class=hljs-keyword>def</span> <span class=hljs-title>initialize</span><span class=hljs-params>(seed)</span></span>
		<span class=hljs-comment># MT内部状態</span>
		<span class=hljs-variable>@i</span> = <span class=hljs-number>0</span>
		<span class=hljs-variable>@x</span> = [seed &#38 WHOLE_MASK]

		<span class=hljs-comment># 初期化 (mt19937ar.cに準拠)</span>
		<span class=hljs-number>1</span>.upto(N-<span class=hljs-number>1</span>) <span class=hljs-keyword>do</span> <span class=hljs-params>|i|</span>
			<span class=hljs-variable>@x</span>[i] = (<span class=hljs-number>1812433253</span> * (<span class=hljs-variable>@x</span>[i-<span class=hljs-number>1</span>] ^ (<span class=hljs-variable>@x</span>[i-<span class=hljs-number>1</span>] >> <span class=hljs-number>30</span>)) + i) &#38 WHOLE_MASK
		<span class=hljs-keyword>end</span>
	<span class=hljs-keyword>end</span>

	<span class=hljs-comment># MTで乱数を生成</span>
	<span class=hljs-function><span class=hljs-keyword>def</span> <span class=hljs-title>next</span></span>
		<span class=hljs-comment># Step.1</span>
		z = <span class=hljs-variable>@x</span>[<span class=hljs-variable>@i</span>] &#38 UPPER_MASK <span class=hljs-params>| @x[(@i + 1) % N] &#38 LOWER_MASK

		# Step.2
		@x[@i] = @x[(@i + M) % N] ^ (z >> 1) ^ (z &#38 1 == 0 ? 0 : A)

		# Step.3
		y = @x[@i]
		y = y ^ (y >> U)
		y = y ^ ((y &#60&#60 S) &#38 B)
		y = y ^ ((y &#60&#60 T) &#38 C)
		y = y ^ (y >> L)

		# カウンタを変更して、生成した乱数を返す
		@i = (@i + 1) % N
		<span class=hljs-keyword>return</span> y
	<span class=hljs-keyword>end</span>
<span class=hljs-keyword>end</span>

########################################

# 使ってみる
mt = MT.new(20150919) # ← シード値
2048.times <span class=hljs-keyword>do</span> |</span>i<span class=hljs-params>|
	print i, ": ", mt.<span class=hljs-keyword>next</span>, "\n"
<span class=hljs-keyword>end</span>
</span></code></pre><p>（あんまり自信がないですが、MTの考案者が書いた<a href=http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/CODES/mt19937ar.c rel="noopener noreferrer"target=_blank>C++プログラム</a>と出力が一致したので、多分大丈夫。）<p>こうやってみると、本当に<strong>単純</strong>ですね！ それでいて性能がたいへんよろしいのですから、スゴイものです。<p>ちなみに↑はもともとPerlで書いてたんですが、諸事情によりRubyで書き直しました。以下はPerl版。<aside><a href=https://gist.github.com/kaz/0bd9bcd72a964864e74fd55bcdfd3117 rel="noopener noreferrer"target=_blank style=background-image:url(https://github.githubassets.com/images/modules/gists/gist-og-image.png)><div><strong>MersenneTwister</strong><cite>gist.github.com</cite><q cite=https://gist.github.com/kaz/0bd9bcd72a964864e74fd55bcdfd3117>MersenneTwister. GitHub Gist: instantly share code, notes, and snippets.</q></div></a></aside><h1>発展</h1><p>とりあえずMTがこういうものだって、わかった気になれたわけです。 個人的には、 <em>Tempering</em> のトコロが面白いと思っていて、ココをもうちょっと掘り下げてみたいと思います。<p>Temperingは正則行列<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>T</mi></mrow><annotation encoding=application/x-tex>T</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.13889em>T</span></span></span></span></span>を右から掛ける演算ですが、 この<span class="math math-inline"><span class=katex><span class=katex-mathml><math xmlns=http://www.w3.org/1998/Math/MathML><semantics><mrow><mi>T</mi></mrow><annotation encoding=application/x-tex>T</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.68333em;vertical-align:0></span><span class="mord mathnormal"style=margin-right:.13889em>T</span></span></span></span></span>が実際にはどんな行列なのかには、触れませんでした。<p>でも、正則行列ってことは<strong>逆行列</strong>が存在して、Temperingの逆演算もできて……？ みたいなお話です。（なんか楽しそうな気がしません？）<p>ということで、次回に続く！！！<aside><a href=/posts/6/ style=background-image:url(https://res.cloudinary.com/narusejun/image/twitter_name/h_128/sekai67.jpg)><div><strong>メルセンヌ・ツイスタを倒す</strong><cite>6715.jp</cite><q cite=https://6715.jp/posts/6/>メルセンヌ・ツイスタの性質を理解したい。 この記事は前回の続きです。 メルセンヌ・ツイスタをわかった気になる 今日のテーマ 今日のテーマは、メルセンヌ・ツイスタ(MT)の性質についてです。 MTの生…</q></div></a></aside></article><div class="SocialShare_social__3xEln"><a rel="noopener noreferrer" target="_blank" href="https://social-plugins.line.me/lineit/share?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="LINE" style="background-color:#00C300"><svg viewBox="0 0 24 24"><path fill="white" d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="http://twitter.com/share?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F&amp;text=%E3%83%A1%E3%83%AB%E3%82%BB%E3%83%B3%E3%83%8C%E3%83%BB%E3%83%84%E3%82%A4%E3%82%B9%E3%82%BF%E3%82%92%E3%82%8F%E3%81%8B%E3%81%A3%E3%81%9F%E6%B0%97%E3%81%AB%E3%81%AA%E3%82%8B%20%7C%206715.jp"><span title="Twitter" style="background-color:#1DA1F2"><svg viewBox="0 0 24 24"><path fill="white" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="Facebook" style="background-color:#1877F2"><svg viewBox="0 0 24 24"><path fill="white" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="http://b.hatena.ne.jp/add?url=https%3A%2F%2F6715.jp%2Fposts%2F5%2F"><span title="Hatena Bookmark" style="background-color:#00A4DE"><svg viewBox="0 0 24 24"><path fill="white" d="M20.47 0C22.42 0 24 1.58 24 3.53v16.94c0 1.95-1.58 3.53-3.53 3.53H3.53C1.58 24 0 22.42 0 20.47V3.53C0 1.58 1.58 0 3.53 0h16.94zm-3.705 14.47c-.78 0-1.41.63-1.41 1.41s.63 1.414 1.41 1.414 1.41-.645 1.41-1.425-.63-1.41-1.41-1.41zM8.61 17.247c1.2 0 2.056-.042 2.58-.12.526-.084.976-.222 1.32-.412.45-.232.78-.564 1.02-.99s.36-.915.36-1.48c0-.78-.21-1.403-.63-1.87-.42-.48-.99-.734-1.74-.794.66-.18 1.156-.45 1.456-.81.315-.344.465-.824.465-1.424 0-.48-.103-.885-.3-1.26-.21-.36-.493-.645-.883-.87-.345-.195-.735-.315-1.215-.405-.464-.074-1.29-.12-2.474-.12H5.654v10.486H8.61zm.736-4.185c.705 0 1.185.088 1.44.262.27.18.39.495.39.93 0 .405-.135.69-.42.855-.27.18-.765.254-1.44.254H8.31v-2.297h1.05zm8.656.706v-7.06h-2.46v7.06H18zM8.925 9.08c.71 0 1.185.08 1.432.24.245.16.367.435.367.83 0 .38-.13.646-.39.804-.265.154-.747.232-1.452.232h-.57V9.08h.615z"></path></svg></span></a></div></main><footer class="Footer_footer__22y9A"><div id="profile" class="Footer_profile__39Joc"><img src="https://res.cloudinary.com/narusejun/image/twitter_name/h_128/sekai67.jpg" alt="sekai"/><div><small>Author</small><strong>sekai<a rel="noopener noreferrer" target="_blank" href="https://github.com/kaz"><span title="GitHub" style="background-color:initial"><svg viewBox="0 0 24 24"><path fill="#181717" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="https://twitter.com/sekai67"><span title="Twitter" style="background-color:initial"><svg viewBox="0 0 24 24"><path fill="#1DA1F2" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></span></a><a rel="noopener noreferrer" target="_blank" href="https://www.facebook.com/sawada.kazuki"><span title="Facebook" style="background-color:initial"><svg viewBox="0 0 24 24"><path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></span></a></strong><p>インフラとDXが好き</p></div></div><div class="Footer_copyright__3QtRW">© <!-- -->2016 sekai</div></footer></div></body></html>