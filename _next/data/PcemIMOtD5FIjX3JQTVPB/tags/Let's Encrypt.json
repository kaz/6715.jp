{"pageProps":{"tag":"Let's Encrypt","entries":[{"type":"article","slug":"25","body":"ã“ã®è¨˜äº‹ã¯[ConoHa Advent Calendar 2018](https://qiita.com/advent-calendar/2018/conoha)ã®21æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼\n\n[ConoHa Advent Calendar 2018](https://qiita.com/advent-calendar/2018/conoha)\n\n# ConoHaã®[DNS API](https://www.conoha.jp/docs/)ã¯ä¾¿åˆ©\n\nã¨ã„ã†è©±ã‚’[2å¹´å‰](/posts/14/)ã«ã‚‚ã—ãŸã®ã§ã—ãŸã€‚\n\n[2å¹´å‰ã®è¨˜äº‹](/posts/14/)\n\nçš†ã•ã‚“ã€ConoHaã®DNS APIä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿ\nLet's Encryptã®DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã®è‡ªå‹•åŒ–ã«ã‚‚ä½¿ãˆã‚‹ï¼ã®ã§ã‚¤ã‚±ã¦ã¾ã™ã­ã€‚\n\n## APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¤ã„ã¦\n\nã•ã¦ã€ã§ã¯ã©ã†ã‚„ã£ã¦APIã‚’å©ãã‹ï¼Ÿ\nå…ˆã«ç´¹ä»‹ã—ãŸè¨˜äº‹ã®è¦æ—¨ã¯ã€ŒConoHa DNSç”¨ APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ä½œã£ãŸã€ãªã‚“ã§ã™ãŒã€ã‚ã¾ã‚Šã«ã‚‚ä½¿ã„è¾›ã„ã®ã§ç„¡è¦–ã—ã¾ã™ã€‚\n\n### Designateã‚¯ãƒ©ã‚¤ãƒ³ãƒˆã‚’ä½¿ã†\n\nConoHaã®DNSã¯[OpenStack Designate](https://docs.openstack.org/designate/latest/)ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚å¤šåˆ†ã€‚APIä½“ç³»ãŒã‚½ãƒ¬ã£ã½ã„ã®ã§ã€‚\n\nãªã®ã§ã€[Designateã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ](https://docs.openstack.org/python-designateclient/latest/cli/index.html)ãŒä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œãªã„â€¦â€¦ï¼Ÿï¼ˆæœªç¢ºèªï¼‰\n\nã—ã‹ã—ã€ConoHaã§ã¯deprecatedãªv1 APIã®ã¿æä¾›ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€äº’æ›æ€§ã®é¢ã§æ­»ã¬ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\n[ä¸€å¿œv2ã‚‚å‹•ã„ã¦ã„ã‚‹](https://dns-service.tyo1.conoha.io/)ã‚ˆã†ã§ã™ãŒã€ä¸å®Œå…¨ãªã‚ˆã†ã§ã™ã—ã€ãã‚‚ãã‚‚undocumentedã§ã™ã€‚\n\n### Lexiconã‚’ä½¿ã†\n\næ§˜ã€…ãªDNSã‚µãƒ¼ãƒ“ã‚¹ã‚’1ã¤ã®CLIã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒ[Lexicon](https://github.com/AnalogJ/lexicon)ã§ã™ã€‚\n\nãªã‚“ã¨**ConoHa DNSã«å¯¾å¿œ**ã—ã¦ã„ã¾ã™ï¼ã™ã”ã„ï¼ï¼\nï¼ˆã¾ãã€ãƒœã‚¯ãŒä½¿ã†ãŸã‚ã«å¯¾å¿œã•ã›ãŸã‹ã‚‰ãªã‚“ã§ã™ã‚±ãƒ‰â€¦â€¦ï¼‰\n\nä¾¿åˆ©ãªã®ã§ä½¿ã£ã¦ãã ã•ã„ã€‚pipã•ãˆã‚ã‚Œã°Getã§ãã¾ã™ã€‚\nã“ã‚“ãªå…·åˆã«ä½¿ãˆã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚\n\n```\n$ pip install dns-lexicon\n\n$ lexicon conoha\nusage: lexicon conoha [-h] [--name NAME] [--content CONTENT] [--ttl TTL]\n                      [--priority PRIORITY] [--identifier IDENTIFIER]\n                      [--log_level {CRITICAL,ERROR,WARNING,INFO,DEBUG,NOTSET}]\n                      [--output {TABLE,TABLE-NO-HEADER,JSON,QUIET}]\n                      [--auth-region AUTH_REGION] [--auth-token AUTH_TOKEN]\n                      [--auth-username AUTH_USERNAME]\n                      [--auth-password AUTH_PASSWORD]\n                      [--auth-tenant-id AUTH_TENANT_ID]\n                      {create,list,update,delete} domain\n                      {A,AAAA,CNAME,MX,NS,SOA,TXT,SRV,LOC}\n\n$ lexicon conoha --auth-region tyo1 --auth-username gncu01234567 --auth-password xxxxxxxxxxx --auth-tenant-id 0123456789abcdef0123456789abcdef create narusejun.com A --name local --content 127.0.0.1\n$ lexicon conoha --auth-region tyo1 --auth-username gncu01234567 --auth-password xxxxxxxxxxx --auth-tenant-id 0123456789abcdef0123456789abcdef list narusejun.com A\nID                                   TYPE NAME                CONTENT   TTL\n------------------------------------ ---- ------------------- --------- ----\n42929801-5111-41d5-a115-9f67a1d07810 A    local.narusejun.com 127.0.0.1 3600\n```\n\nè©³ã—ãã¯[å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/AnalogJ/lexicon)ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚\nLet's Encryptã®DNS-01ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚„ã‚Šæ–¹ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã‚ˆï¼\n\n## Let's Encryptã®DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’è‡ªå‹•åŒ–ã™ã‚‹\n\nã›ã£ã‹ãAPIã§DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ“ä½œã§ãã‚‹ã‚ã‘ã§ã™ã—ã€æ´»ç”¨ã—ãŸã„ã§ã™ã­ï¼\n\næœ€è¿‘[ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ãŒå–ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ](/posts/23/)Let's Encryptã¨é€£æºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\nã¡ãªã¿ã«ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã¯DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã—ã‹å–å¾—ã§ãã¾ã›ã‚“ï¼\n\n### Lexiconã¨Dehydratedã‚’ä½¿ã†\n\nå…ˆã»ã©ç´¹ä»‹ã—ãŸlexiconã¨ã€ACMEã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ[Dehydrated](https://github.com/lukas2511/dehydrated)ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã‚„ã‚Šæ–¹ãŒlexiconã®ä½œè€…ã•ã‚“ã«ã‚ˆã£ã¦ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\nhttps://blog.thesparktree.com/generating-intranet-and-private-network-ssl\n\n### Legoã‚’ä½¿ã†\n\n2ã¤ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é€£æºã•ã›ã‚‹ã®ã¯é¢å€’ã§ã™ã—ã€ã§ãã‚Œã°ãƒ‘ãƒ‘ãƒƒã¨ã‚³ãƒãƒ³ãƒ‰1ã¤ã§è¨¼æ˜æ›¸å–ã‚ŠãŸã„ã§ã™ã‚ˆã­ï¼Ÿ\nãã“ã§ã€Goè£½ã®ACMEã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ[lego](https://github.com/xenolf/lego)ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ï¼\nlegoã§ã¯ã€ã„ã‚ã‚“ãªDNS-ProvidersãŒæä¾›ã•ã‚Œã¦ã„ã¦ã€å¯¾å¿œã—ã¦ã„ã‚‹DNSã‚µãƒ¼ãƒ“ã‚¹ãªã‚‰ã™ãã«è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã§ãã¾ã™ã€‚\n\n[lego](https://github.com/xenolf/lego)\n\nãªã‚“ã¨**ConoHa DNSã«å¯¾å¿œ**ã—ã¦ã„ã¾ã™ï¼ã™ã”ã„ï¼ï¼\nï¼ˆã¾ãã€ãƒœã‚¯ãŒä½¿ã†ãŸã‚ã«å¯¾å¿œã•ã›ãŸã‹ã‚‰ãªã‚“ã§ã™ã‚±ãƒ‰â€¦â€¦ï¼‰\n\n[ãƒã‚¤ãƒŠãƒªãŒå…¥æ‰‹å¯èƒ½](https://github.com/xenolf/lego/releases)ãªã»ã‹ã€goãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãªã‚‰`go get`ã§ã™ãã«å…¥æ‰‹ã§ãã¾ã™ã€‚\nã“ã†ã„ã†æ„Ÿã˜ã§ä½¿ã„ã¾ã™ã€‚ã¨ã£ã¦ã‚‚ä¾¿åˆ©ã§ã™ã‚ˆï¼\n\n```\n$ go get -u github.com/xenolf/lego/cmd/lego\n\n$ lego dnshelp\nCredentials for DNS providers must be passed through environment variables.\n\nValid providers and their associated credential environment variables:\n        conoha:         CONOHA_REGION, CONOHA_TENANT_ID, CONOHA_API_USERNAME, CONOHA_API_PASSWORD\n\nAdditional configuration environment variables:\n        conoha:         CONOHA_POLLING_INTERVAL, CONOHA_PROPAGATION_TIMEOUT, CONOHA_TTL, CONOHA_HTTP_TIMEOUT\n\n$ export CONOHA_REGION=tyo1\n$ export CONOHA_TENANT_ID=0123456789abcdef0123456789abcdef\n$ export CONOHA_API_USERNAME=gncu01234567\n$ export CONOHA_API_PASSWORD=xxxxxxxxxxx\n$ lego --dns conoha --server https://acme-staging-v02.api.letsencrypt.org/directory --email cert@narusejun.com --domains narusejun.com --domains *.narusejun.com run\n2018/12/21 02:44:58 [INFO] [narusejun.com, *.narusejun.com] acme: Obtaining bundled SAN certificate\n2018/12/21 02:44:59 [INFO] [*.narusejun.com] AuthURL: https://acme-staging-v02.api.letsencrypt.org/acme/authz/wcYZJB5aWmfi4WzGuwv2JlSaYjryGf67zqES8h8bmEg\n2018/12/21 02:44:59 [INFO] [narusejun.com] AuthURL: https://acme-staging-v02.api.letsencrypt.org/acme/authz/gwXBvxvuHk7TrUYbuu3MWp7heVoLTTle7Nh2ng98b74\n2018/12/21 02:44:59 [INFO] [narusejun.com] acme: Authorization already valid; skipping challenge\n2018/12/21 02:44:59 [INFO] [narusejun.com] acme: Preparing to solve DNS-01\n2018/12/21 02:45:00 [INFO] [narusejun.com] acme: Trying to solve DNS-01\n2018/12/21 02:45:00 [INFO] [narusejun.com] Checking DNS record propagation using [1.0.0.1:53]\n2018/12/21 02:45:00 [INFO] Wait [timeout: 1m0s, interval: 2s]\n2018/12/21 02:45:37 [INFO] [narusejun.com] The server validated our request\n2018/12/21 02:45:38 [INFO] [narusejun.com, *.narusejun.com] acme: Validations succeeded; requesting certificates\n2018/12/21 02:45:39 [INFO] [narusejun.com] Server responded with a certificate.\n\n$ openssl x509 -in ~/.lego/certificates/narusejun.com.crt -text\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number:\n            fa:78:5b:6e:73:74:37:e6:c4:36:54:82:02:04:d2:7e:bd:0b\n        Signature Algorithm: sha256WithRSAEncryption\n        Issuer: CN = Fake LE Intermediate X1\n        Validity\n            Not Before: Dec 20 16:45:40 2018 GMT\n            Not After : Mar 20 16:45:40 2019 GMT\n        Subject: CN = narusejun.com\n        X509v3 extensions:\n            X509v3 Subject Alternative Name:\n                DNS:*.narusejun.com, DNS:narusejun.com\n```\n\nâ€¦â€¦ã¨ã€ã‚µã‚¯ãƒƒã¨ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ãŒå–ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã™ã”ã„ï¼ä¾¿åˆ©ï¼\n\nä¸Šã®ä¾‹ã¯stagingç’°å¢ƒã‹ã‚‰è¨¼æ˜æ›¸ã‚’å–å¾—ã—ã¦ã„ã‚‹ã®ã§ã€ãƒãƒã™ã‚‹éš›ã¯ã”æ³¨æ„ãã ã•ã„ï¼\nè©³ã—ãã¯ã€ä¾‹ã«ã‚ˆã£ã¦[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/xenolf/lego)ã‚’ã”ã‚‰ã‚“ãã ã•ã„ã€‚\n\n### traefikã‚’ä½¿ã†\n\n[traefik](https://docs.traefik.io/)ã¯å¼·ã„L7ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã¿ãŸã„ãªã‚‚ã®ã§ã™ï¼ˆã–ã£ãã‚Šã¨ã—ãŸèª¬æ˜ï¼‰ã€‚\nLet's Encryptã‹ã‚‰è‡ªå‹•ã§è¨¼æ˜æ›¸ã‚’å–ã‚‹æ©Ÿèƒ½ãŒã¤ã„ã¦ã‚‹ã‚“ã§ã™ãŒã€ã“ã®æ©Ÿèƒ½ã¯å†…éƒ¨ã§å…ˆè¿°ã—ãŸlegoã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚\n\n[traefik](https://docs.traefik.io/)\n\nâ€¦â€¦ã¨ã„ã†ã“ã¨ã¯ã€**ConoHa DNSã«å¯¾å¿œ**ã—ã¦ã„ã¾ã™ï¼\nè©³ã—ã„èª¬æ˜ã¯çœãã¾ã™ãŒã€[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.traefik.io/configuration/acme/)ã‚’å‚è€ƒã«è¨­å®šã—ã¦ã¿ã¦ãã ã•ã„ã€‚\nã¡ã‚ƒã‚“ã¨ConoHa DNSã¨é€£æºã—ã¦å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆã¿ã§ã™ã€‚\n\n## ãŠã‚ã‚Šã«\n\nç´¹ä»‹ã—ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ä»¥å¤–ã«ã‚‚ã€Lexiconã‚„Legoã‚’å†…éƒ¨ã§ä½¿ã£ã¦ã‚‹ç³»ã‚½ãƒ•ãƒˆãŒå®Ÿã¯ConoHaã«å¯¾å¿œã—ã¦ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã„ã£ã±ã„ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®ã‚½ãƒ•ãƒˆã§ã‚‚ConoHa DNSä½¿ãˆãŸã‚ˆï¼ã¨ã‹ã‚ã£ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ã€‚\nã¡ãªã¿ã«ã€[Caddy](https://caddyserver.com/)ã¨ã„ã†HTTPã‚µãƒ¼ãƒãŒ[Legoã®å…¨DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ã«å¯¾å¿œã—ãã†](https://caddy.community/t/poll-we-can-end-dns-provider-plugins-should-we/4887)ã ã£ãŸã‚Šã™ã‚‹ã®ã§ã€ãã—ãŸã‚‰ConoHaã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã­ï¼\n\n----\n\nConoHaã®DNSã€ã‚ã£ã¡ã‚ƒä¾¿åˆ©ãªã®ã§ä½¿ã„ã¾ã—ã‚‡ã†ã€‚\nAPIã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã„ã˜ã‚Œã‚‹ã—ã€ã‚¾ãƒ¼ãƒ³æ•°ãŒã„ãã¤ã‚ã£ã¦ã‚‚ç„¡æ–™ã£ã¦ãƒã‚¸ï¼ï¼Ÿç¥ã˜ã‚ƒã‚“ã€‚\n\nã‚ã£ã€ãƒœã‚¯ã®ãƒ‘ã‚½ã‚³ãƒ³è¦‹ã¦ãã ã•ã„ã€‚\n\nhttps://twitter.com/sekai67/status/1053444090757435392\n\nhttps://twitter.com/sekai67/status/1053598421414596608\n\nhttps://twitter.com/sekai67/status/1053441437126127616\n","title":"ConoHaã®DNSã‚’APIã‹ã‚‰æ“ä½œã™ã‚‹è©±","image":null,"tags":["API","ConoHa","DNS","Let's Encrypt","ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼"],"date":"2018-12-21T00:00:00.000Z","updated":"2021-01-07T09:09:45.000Z"},{"type":"article","slug":"23","body":"Let's Encryptã§ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã—ã¦ã¿ã¾ã—ãŸã€‚\n\n# ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸\n\né‚ã«â€¦â€¦é‚ã«æ¥ã¾ã—ãŸã­ã€‚\nLet's Encryptã®**ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸**ãŒã€‚\n\n[ACME v2 and Wildcard Certificate Support is Live](https://community.letsencrypt.org/t/acme-v2-and-wildcard-certificate-support-is-live/55579)\n\néå¸¸ã«ãŠã‚ã§ãŸã„ã§ã™ğŸ‰\n\nã“ã‚Œã§ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ãŸãã•ã‚“åˆ‡ã£ã¦é‹ç”¨ã—ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãªã‚“ã‹ã®è¨¼æ˜æ›¸ã®ç®¡ç†ãŒã‚°ãƒƒã¨ãƒ©ã‚¯ã«ãªã‚Šã¾ã™ã­ã€‚\n\n# æ—©é€Ÿå–å¾—ã—ã¦ã¿ã‚‹\n\næ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€\n\n- ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã¯ACMEv2ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ã®ã¿ç™ºè¡Œã§ãã‚‹\n- ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã¯DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã®ã¿ç™ºè¡Œã§ãã‚‹\n\nå…¬å¼ã®**Certbot**ã¯0.22.0ã‹ã‚‰ACMEv2ã«å¯¾å¿œã—ã¦ãŠã‚Šã€DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã«ã‚‚å¯¾å¿œã—ã¦ã¾ã™ã€‚\nDNS-01ã§ã¯ã€`_acme-challenge.example.com`ã®ã‚ˆã†ãªTXTãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æ‰€æœ‰ã‚’ç¢ºèªã—ã¾ã™ã€‚\n\n## æ‰‹é †\n\né©å½“ã«Certbot(certbot-auto)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\næ˜ç¤ºçš„ã«ACMEv2ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨DNS-01ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚Šã¾ã™ã€‚\n\n```sh\ncertbot certonly \\\n--manual \\\n--preferred-challenges dns-01 \\\n--server https://acme-v02.api.letsencrypt.org/directory \\\n--domain *.kiritan.com\n```\n\nã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ŒIPè¨˜éŒ²ã™ã‚‹ã‘ã©ã„ã„ï¼Ÿã€ã£ã¦ç¢ºèªã•ã‚Œã¾ã™ã€‚\nDNS-01ã¯ã€å®Ÿéš›ã«è¨¼æ˜æ›¸ã‚’ä½¿ã†ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã‹ã‚‰ã‚‚ç™ºè¡ŒãŒè¦æ±‚ã§ãã‚‹ã‚“ã§ã™ãŒã€è¦æ±‚å…ƒã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¨˜æ†¶ã•ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚\n\n```\n-------------------------------------------------------------------------------\nNOTE: The IP of this machine will be publicly logged as having requested this\ncertificate. If you're running certbot in manual mode on a machine that is not\nyour server, please ensure you're okay with that.\n\nAre you OK with your IP being logged?\n-------------------------------------------------------------------------------\n(Y)es/(N)o:\n```\n\né€²ã‚€ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã‚ã¨è¨€ã‚ã‚Œã‚‹ã®ã§ã€è¨­å®šã—ã¾ã™ã€‚\n\n```\n-------------------------------------------------------------------------------\nPlease deploy a DNS TXT record under the name\n_acme-challenge.kiritan.com with the following value:\n\nf4WTOGBdEhZF7aAx9mZof8X9072JVUKDR7FhmUlKiYo\n\nBefore continuing, verify the record is deployed.\n-------------------------------------------------------------------------------\nPress Enter to Continue\n```\n\nãƒœã‚¯ã¯[ConoHa](https://www.conoha.jp/referral/?token=sp928CCbwhPZeu0SLEbeVyIhGOsIchLSzaun2yUbKWaR.q89860-OPA)ã®DNSã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚\næ™®é€šã«Webãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã®ã¯ã‚‚ã¡ã‚ã‚“ã€APIçµŒç”±ã§è¨­å®šã‚‚ã§ãã‚‹ã®ã§éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚\nã‚ã¨ã€DNSã‚µãƒ¼ãƒ“ã‚¹è‡ªä½“ã¯ç„¡æ–™ã§ã™ã€‚ãµã¨ã£ã°ã‚‰ã§ã™ã­ã€‚\n\nã¤ã„ã§ã«å®£ä¼â†“\n\n[ConoHaã®DNS APIã‚’CLIã‹ã‚‰å©ãã‚„ã¤ã‚’ä½œã£ãŸ](/posts/14/)\n\nã‚ã¨ã€AWSã®Route53ã¿ãŸã„ãªæœ‰åã‚µãƒ¼ãƒ“ã‚¹ãªã‚‰ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã®ã§æ‰‹è»½ã«DNS-01ã«ã‚ˆã‚‹ç¢ºèªãŒã§ãã‚‹ã¿ãŸã„ã§ã™ã€‚\n\n[Certbot Docs Â» User Guide Â» DNS Plugins](https://certbot.eff.org/docs/using.html#dns-plugins)\n\nä»Šåº¦ConoHaã®DNSã§ã‚‚ç°¡å˜ã«è¨¼æ˜æ›¸ãŒã¨ã‚Œã‚‹DNS-01ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã‹ãªï¼Ÿï¼Ÿï¼Ÿ\n\né©åˆ‡ã«TXTãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã—ãŸã‚‰ã€ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã‚’æŠ¼ã›ã°çµ‚ã‚ã‚Šï¼\n\n![](0.png)\n\n```\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/kiritan.com/fullchain.pem\n```\n\nç°¡å˜ã§ã™ã­ï¼\nã‚ã¨ã¯ã€HTTPã‚µãƒ¼ãƒã«è¨­å®šã—ã¦ã‚ã’ã‚Œã°å¤¢ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã«ã‚ˆã‚‹HTTPSåŒ–ãŒå®Œäº†ã§ã™ï¼\n\n![](1.png)\n![](2.png)\n\nã†ã‚ã€œã€œãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã ã€œã€œã†ã‚Œã—ã„ã€œã€œ\n\n# ãŠã‚ã‚Š\n\nTXTãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã¨ã“ã‚ãŒè‡ªå‹•åŒ–ã§ãã‚‹ãªã‚‰ã€æœ¬å½“ã«è¨¼æ˜æ›¸ç®¡ç†ã®æ‰‹é–“ãŒå°‘ãªããªã‚‹ã¨æ€ã„ã¾ã™ã€‚\n\nåˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ç®¡ç†ã®æ‰‹é–“ã‚’ãªãã™è¨˜äº‹ã‚‚ã‚ã‚Šã¾ã™ã€‚è¦‹ã¦ã­ã€‚\n\n[lua-nginx-auto-sslã§å…¨è‡ªå‹•HTTPS](/posts/21/)\n","title":"Let's Encryptã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã‚’æ—©é€Ÿç™ºè¡Œã—ã¦ã‚‚ã‚‰ã†","image":null,"tags":["Let's Encrypt","SSL","ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£","è‡ªå‹•åŒ–"],"date":"2018-03-14T00:00:00.000Z","updated":"2021-01-08T10:53:56.000Z"}]},"__N_SSG":true}